CREATE DATABASE IF NOT EXISTS UrbaPassDB;
USE UrbaPassDB;

CREATE TABLE IF NOT EXISTS Direccion (
	UID BINARY(16) NOT NULL PRIMARY KEY COMMENT "",
    CallePrincipal VARCHAR(50) NOT NULL COMMENT "",
    CallePrincipal VARCHAR(50) NOT NULL COMMENT "",
    Ciudad VARCHAR(25) NOT NULL COMMENT "",
    Provincia VARCHAR(25) NOT NULL COMMENT "",
    Pais VARCHAR(25) NOT NULL COMMENT ""
);

CREATE TABLE IF NOT EXISTS Persona (
	Cedula CHAR(10) NOT NULL UNIQUE PRIMARY KEY COMMENT 'ID UNICO DE PERSONA',
    Nombre VARCHAR(20) NOT NULL COMMENT 'NOMBRE DE LA PERSONA',
    Apellido VARCHAR(20) NOT NULL COMMENT 'APELLIDO DEL PADRE DE LA PERSONA'
);

CREATE TABLE IF NOT EXISTS Banco (
	UID BINARY(16) NOT NULL PRIMARY KEY COMMENT "",
    Nombre VARCHAR(20) NOT NULL COMMENT ""
);

CREATE TABLE IF NOT EXISTS CuentaBancaria (
	UID BINARY(16) NOT NULL PRIMARY KEY COMMENT "",
    Numero VARCHAR(14) NOT NULL COMMENT "",
    Tipo BINARY(16) NOT NULL COMMENT "",
    CONSTRAINT cbtypeFK FOREIGN KEY (Tipo) REFERENCES Banco (UID)
);

CREATE TABLE IF NOT EXISTS Ruc (
	Numero CHAR(13) NOT NULL PRIMARY KEY COMMENT ""
);

CREATE TABLE IF NOT EXISTS Urbanizacion (
	UID BINARY(16) NOT NULL PRIMARY KEY COMMENT "",
    Nombre VARCHAR(30) NOT NULL COMMENT "",
    Cuenta BINARY(16) NOT NULL COMMENT "",
    Direccion BINARY(16) NOT NULL COMMENT "",
    Ruc CHAR(13) NOT NULL COMMENT "",
    CONSTRAINT urbCtaFK FOREIGN KEY (Cuenta) REFERENCES CuentaBancaria (UID),
    CONSTRAINT urbDirFK FOREIGN KEY (Direccion) REFERENCES Direccion (UID),
    CONSTRAINT urbRucFK FOREIGN KEY (Ruc) REFERENCES Ruc (Numero)
);

CREATE TABLE IF NOT EXISTS Usuario (
	Cedula CHAR(10) NOT NULL PRIMARY KEY COMMENT "",
    Urbanizacion BINARY(16) NOT NULL COMMENT "",
    Correo VARCHAR(30) NOT NULL COMMENT "",
    Nick VARCHAR(20) NOT NULL COMMENT "",
    Clave VARCHAR(25) NOT NULL COMMENT "",
    CONSTRAINT usrUrbFK FOREIGN KEY (Urbanizacion) REFERENCES Urbanizacion (UID)
);
